<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="assets/css/style2.css">
    <link href="https://fonts.googleapis.com/css?family=Kaushan+Script|Montserrat:400,700&amp;subset=cyrillic-ext" rel="stylesheet">
    <title>ur</title>
</head>
<body>


<header class="header">
    <div class="container">
                <nav class="nav">
                <a class="nav__link " href="../сайт/index.html">Главная</a>
                <a class="nav__link " href="../сайт/subd.html">СУБД</a>
                <a class="nav__link active" href="../сайт/temy1.html">Уроки</a>
				 <a class="btn" href="../сайт/test.html">Тест</a>
               
            </nav>
        </div>
    </div>
</header>

<div class="sidenav">
<button class="dropdown-btn"> CУБД
    <i class=" fa-caret-down"></i>
  </button>
  <div class="dropdown-container">
    <a href="../сайт/subd.html #t1">Oracle</a>
    <a href="../сайт/subd.html #t2">MySQL</a>
    <a href="../сайт/subd.html #t3">Microsoft SQL Server</a>
  </div>
  <a href="../сайт/урок1.html">Урок 1.Представления</a>
  <a href="../сайт/урок2.html">Урок 2.Триггеры</a>
  <a href="../сайт/урок3.html"">Урок 3.Хранимые процедуры</a>
  
  
  
  
</div>
<script>
/* Цикл через все кнопки выпадающего списка для переключения между скрытием и отображением его выпадающего содержимого - это позволяет пользователю иметь несколько выпадающих списков без каких-либо конфликтов */
var dropdown = document.getElementsByClassName("dropdown-btn");
var i;

for (i = 0; i < dropdown.length; i++) {
  dropdown[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var dropdownContent = this.nextElementSibling;
    if (dropdownContent.style.display === "block") {
      dropdownContent.style.display = "none";
    } else {
      dropdownContent.style.display = "block";
    }
  });
}
</script>
<article class="main">
<div id= "t1" >
  <h2>Представления в SQL</h2>
  <h3>Общее понятие</h3>
  <p>Представления нужны для того, чтобы упростить работу с базой данных и ускорить время ответа сервера. Так как представление — это уже результат некой выборки данных с помощью SELECT, то, очевидно, в следующий раз вместо запроса к нескольким таблицам достаточно просто обратиться к уже созданному представлению. Работу этого объекта характеризует следующее изображение:</p>
  <p><img src="../сайт/assets/images/view-sql.jpg" alt="half left" ></p>
  <p>На изображении — простой вариант использования представления, когда объединяются данные по идентификатору. Но, помимо этого, в представлениях могут быть разные виды условий и ограничений, также вложенные запросы и группировки по каким либо полям. Об этом будет сказано чуть позже. </p>
  <h4> Создание представления в SQL</h4>
  <p>
  Создание представления осуществляется командой <b>CREATE VIEW name_view
as:</b> </p>  
  </p>
   <p>
 Где <b>name_view</b> — имя, которое задает пользователь при создании. После ключевого слова as идет код запроса SELECT, данные которого и поместятся в представление. Чтобы легче понять разберем простой пример, иллюстрация которого была представлена выше.
  </p>
  
  <p>CREATE VIEW info_order
AS SELECT onum, amt, cname<br>
FROM orders, customers<br>
WHERE orders.cnum = customers.cnum</p>

  
  <p>С помощью SELECT выбираются данные и помещаются в представление. Еще раз повторим, что когда данные в исходных таблицах изменятся, то они поменяются и в представлении.

Теперь представление практически является таблицей, если вы используете phpmyadmin, то слева в меню можно увидеть такую картину:</p>
 </p> 
   <p><img src="../сайт/assets/images/view-sql-tree.jpg" alt="" class="half right"></p> 
</article>
<article class="main">
<div id= "t2" >
  <h2>Триггеры в SQL</h2>
  <h3>Общее понятие</h3>
  <p>Итак, разберем такую сущность SQL как триггеры. Также как представления и процедуры — триггеры в SQL создаются и хранятся отдельно до момента их удаления. Триггеры по своей сути представляют обработчики событий. Они выполняются при наступлении какого-либо простого действия в SQL. Такими действиями обычно являются: удаление, вставка и обновление данных.

То есть, триггер — это по сути ловушка, которая срабатывает при определенном действии. Триггер позволяет автоматизировать некоторые расчетные рутинные действия. Примеры мы разберем дальше.</p>
   </p>
  <h4> Создание триггеров в SQL</h4>
  <p>
  Триггеры создаются также, как и хранимые процедуры в SQL. Либо во вкладке SQL с помощью кода, либо с помощью графического редактора во вкладке триггеры. Оператор для создания следующий:

CREATE TRIGGER name_trigger <b>CREATE TRIGGER name_trigger</b> </p>  
  </p>
   <p>После оператора и имени триггера необходимо указать в каком случае будет срабатывать триггер. Возможно 6 вариантов:
 
  </p>
  
  <p>1.BEFORE INSERT<br>
2.BEFORE UPDATE<br>
3.BEFORE DELETE<br>
4.AFTER INSERT<br>
5.AFTER UPDATE<br>
6.AFTER DELETE<br>
</p>

  <h3>Пример работы в SQL</h3>
  <p>Рассмотрим тестовую задачу, которая покажет возможности триггеров. Предположим, что в таблице orders нам нужно поменять цену (поле amt), а новое значение, которое мы введем, увеличить еще на 20%. Задача бывает полезна, когда нужно сделать наценку на товар.

Чтобы нам не высчитывать 20% вручную от новой цены — создадим триггер. Он автоматически будет увеличивать новую цену на 20%.
Вот код создания такого триггера:</p>
<p>DELIMITER //<br>
CREATE TRIGGER Before_Update_amt<br>
BEFORE UPDATE ON orders<br>
FOR EACH ROW<br>
BEGIN<br>
    SET NEW.amt = NEW.amt * 1.2;<br>
END //<br>
DELIMITER ;<br>
 </p> 
 </article>
 <article class="main">
 <div id= "t3" >
  <h2>Хранимые процедуры в SQL</h2>
  <h3>Общее понятие</h3>
  <p>Итак, хранимые процедуры в SQL — это аналог функций в других языках программирования. Хранимые процедуры могут выполнять действия над данными автоматически: вывод данных, удаление, изменение — то, что мы делали в прошлых уроках вручную.

Особенностью процедур является то, что есть возможность передавать аргументы, (так же как и функциям в других языка) и выводить различные данные в зависимости от аргумента. Также, процедура является сущностью SQL, которую создают один раз, а затем вызывают, передавая аргументы.</p>
  <h3>Хранимые процедуры в MySQL</h3>
  <p>Хранимые процедуры в СУБД MySQL можно создать несколькими способами, мы кратко опишем 2 способа через утилиту phpmyadmin:</p>

<p>1.Через консоль SQL запросов</p>
<p>Также как и все запросы SELECT, INSERT и т.д код создания хранимых процедур можно прописывать на вкладке SQL.</p>
  <p><img src="../сайт/assets/images/sql-query.png" alt="half left" ></p>
  <p>2.Через специальную вкладку процедуры</p>
<p>Второй способ возможен тогда, когда мы выбрали определенную БД, и конкретно для нее появляется вкладка процедур, как на скриншоте ниже. </p>
  <p><img src="../сайт/assets/images/procedure_menu.png" alt="half left" ></p>
  <h3> Создание процедур в SQL</h3>
  <p>
 тобы создать процедуру необходимо воспользоваться оператором <b>CREATE PROCEDURE</b>. После оператора следует указать имя процедуры, а затем в круглых скобках аргументы, если они имеются, вместе с указанием типа данных каждого аргумента. Примерно это будет выглядеть так: </p>  
  </p>
   <p>CREATE PROCEDURE name_procedure (arg1 datatype, arg2 datatype,...) </p>

   
</article>
     
</body>
</html>
